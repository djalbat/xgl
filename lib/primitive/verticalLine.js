"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return VerticalLine;
    }
});
const _array = require("../utilities/array");
const _rotation = require("../utilities/rotation");
const _intersection = require("../utilities/intersection");
const _quaternion = require("../utilities/quaternion");
class VerticalLine {
    constructor(firstPositionComponent, forwardsRotationQuaternion, backwardsRotationQuaternion){
        this.firstPositionComponent = firstPositionComponent;
        this.forwardsRotationQuaternion = forwardsRotationQuaternion;
        this.backwardsRotationQuaternion = backwardsRotationQuaternion;
    }
    getFirstPositionComponent() {
        return this.firstPositionComponent;
    }
    getForwardsRotationQuaternion() {
        return this.forwardsRotationQuaternion;
    }
    getBackwardsRotationQuaternion() {
        return this.backwardsRotationQuaternion;
    }
    splitFacet(facet, smallerFacets, marginOfError) {
        const edges = facet.getEdges(), intersections = edges.map((edge)=>{
            const intersection = (0, _intersection.calculateIntersection)(edge, this.firstPositionComponent);
            return intersection;
        });
        facet.splitWithIntersections(intersections, smallerFacets, marginOfError);
    }
    splitFacets(facets, marginOfError) {
        const smallerFacets = [];
        facets.forEach((facet)=>{
            facet.rotate(this.forwardsRotationQuaternion);
            this.splitFacet(facet, smallerFacets, marginOfError);
        });
        smallerFacets.forEach((smallerFacet)=>{
            smallerFacet.rotate(this.backwardsRotationQuaternion);
        });
        return smallerFacets;
    }
    static fromMaskingEdge(maskingEdge) {
        const maskingEdgePosition = maskingEdge.getPosition(), rotationAboutZAxisQuaternion = (0, _quaternion.calculateRotationAboutZAxisQuaternion)(maskingEdge), rotationQuaternion = rotationAboutZAxisQuaternion, forwardsRotationQuaternion = (0, _quaternion.calculateForwardsRotationQuaternion)(rotationQuaternion), backwardsRotationQuaternion = (0, _quaternion.calculateBackwardsRotationQuaternion)(rotationQuaternion), position = (0, _rotation.rotatePosition)(maskingEdgePosition, rotationQuaternion), positionComponents = position, firstPositionComponent = (0, _array.first)(positionComponents), verticalLine = new VerticalLine(firstPositionComponent, forwardsRotationQuaternion, backwardsRotationQuaternion);
        return verticalLine;
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9wcmltaXRpdmUvdmVydGljYWxMaW5lLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgeyBmaXJzdCB9IGZyb20gXCIuLi91dGlsaXRpZXMvYXJyYXlcIjtcbmltcG9ydCB7IHJvdGF0ZVBvc2l0aW9uIH0gZnJvbSBcIi4uL3V0aWxpdGllcy9yb3RhdGlvblwiO1xuaW1wb3J0IHsgY2FsY3VsYXRlSW50ZXJzZWN0aW9uIH0gZnJvbSBcIi4uL3V0aWxpdGllcy9pbnRlcnNlY3Rpb25cIjtcbmltcG9ydCB7IGNhbGN1bGF0ZVJvdGF0aW9uQWJvdXRaQXhpc1F1YXRlcm5pb24sIGNhbGN1bGF0ZUZvcndhcmRzUm90YXRpb25RdWF0ZXJuaW9uLCBjYWxjdWxhdGVCYWNrd2FyZHNSb3RhdGlvblF1YXRlcm5pb24gfSBmcm9tIFwiLi4vdXRpbGl0aWVzL3F1YXRlcm5pb25cIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmVydGljYWxMaW5lIHtcbiAgY29uc3RydWN0b3IoZmlyc3RQb3NpdGlvbkNvbXBvbmVudCwgZm9yd2FyZHNSb3RhdGlvblF1YXRlcm5pb24sIGJhY2t3YXJkc1JvdGF0aW9uUXVhdGVybmlvbikge1xuICAgIHRoaXMuZmlyc3RQb3NpdGlvbkNvbXBvbmVudCA9IGZpcnN0UG9zaXRpb25Db21wb25lbnQ7XG4gICAgdGhpcy5mb3J3YXJkc1JvdGF0aW9uUXVhdGVybmlvbiA9IGZvcndhcmRzUm90YXRpb25RdWF0ZXJuaW9uO1xuICAgIHRoaXMuYmFja3dhcmRzUm90YXRpb25RdWF0ZXJuaW9uID0gYmFja3dhcmRzUm90YXRpb25RdWF0ZXJuaW9uO1xuICB9XG5cbiAgZ2V0Rmlyc3RQb3NpdGlvbkNvbXBvbmVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5maXJzdFBvc2l0aW9uQ29tcG9uZW50O1xuICB9XG4gIFxuICBnZXRGb3J3YXJkc1JvdGF0aW9uUXVhdGVybmlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5mb3J3YXJkc1JvdGF0aW9uUXVhdGVybmlvbjtcbiAgfVxuXG4gIGdldEJhY2t3YXJkc1JvdGF0aW9uUXVhdGVybmlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5iYWNrd2FyZHNSb3RhdGlvblF1YXRlcm5pb247XG4gIH1cblxuICBzcGxpdEZhY2V0KGZhY2V0LCBzbWFsbGVyRmFjZXRzLCBtYXJnaW5PZkVycm9yKSB7XG4gICAgY29uc3QgZWRnZXMgPSBmYWNldC5nZXRFZGdlcygpLFxuICAgICAgICAgIGludGVyc2VjdGlvbnMgPSBlZGdlcy5tYXAoKGVkZ2UpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGludGVyc2VjdGlvbiA9IGNhbGN1bGF0ZUludGVyc2VjdGlvbihlZGdlLCB0aGlzLmZpcnN0UG9zaXRpb25Db21wb25lbnQpO1xuXG4gICAgICAgICAgICByZXR1cm4gaW50ZXJzZWN0aW9uO1xuICAgICAgICAgIH0pO1xuXG4gICAgZmFjZXQuc3BsaXRXaXRoSW50ZXJzZWN0aW9ucyhpbnRlcnNlY3Rpb25zLCBzbWFsbGVyRmFjZXRzLCBtYXJnaW5PZkVycm9yKTtcbiAgfVxuXG4gIHNwbGl0RmFjZXRzKGZhY2V0cywgbWFyZ2luT2ZFcnJvcikge1xuICAgIGNvbnN0IHNtYWxsZXJGYWNldHMgPSBbXTtcblxuICAgIGZhY2V0cy5mb3JFYWNoKChmYWNldCkgPT4ge1xuICAgICAgZmFjZXQucm90YXRlKHRoaXMuZm9yd2FyZHNSb3RhdGlvblF1YXRlcm5pb24pO1xuXG4gICAgICB0aGlzLnNwbGl0RmFjZXQoZmFjZXQsIHNtYWxsZXJGYWNldHMsIG1hcmdpbk9mRXJyb3IpO1xuICAgIH0pO1xuXG4gICAgc21hbGxlckZhY2V0cy5mb3JFYWNoKChzbWFsbGVyRmFjZXQpID0+IHtcbiAgICAgIHNtYWxsZXJGYWNldC5yb3RhdGUodGhpcy5iYWNrd2FyZHNSb3RhdGlvblF1YXRlcm5pb24pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHNtYWxsZXJGYWNldHM7XG4gIH1cblxuICBzdGF0aWMgZnJvbU1hc2tpbmdFZGdlKG1hc2tpbmdFZGdlKSB7XG4gICAgY29uc3QgbWFza2luZ0VkZ2VQb3NpdGlvbiA9IG1hc2tpbmdFZGdlLmdldFBvc2l0aW9uKCksXG4gICAgICAgICAgcm90YXRpb25BYm91dFpBeGlzUXVhdGVybmlvbiA9IGNhbGN1bGF0ZVJvdGF0aW9uQWJvdXRaQXhpc1F1YXRlcm5pb24obWFza2luZ0VkZ2UpLFxuICAgICAgICAgIHJvdGF0aW9uUXVhdGVybmlvbiA9IHJvdGF0aW9uQWJvdXRaQXhpc1F1YXRlcm5pb24sICAvLy9cbiAgICAgICAgICBmb3J3YXJkc1JvdGF0aW9uUXVhdGVybmlvbiA9IGNhbGN1bGF0ZUZvcndhcmRzUm90YXRpb25RdWF0ZXJuaW9uKHJvdGF0aW9uUXVhdGVybmlvbiksXG4gICAgICAgICAgYmFja3dhcmRzUm90YXRpb25RdWF0ZXJuaW9uID0gY2FsY3VsYXRlQmFja3dhcmRzUm90YXRpb25RdWF0ZXJuaW9uKHJvdGF0aW9uUXVhdGVybmlvbiksXG4gICAgICAgICAgcG9zaXRpb24gPSByb3RhdGVQb3NpdGlvbihtYXNraW5nRWRnZVBvc2l0aW9uLCByb3RhdGlvblF1YXRlcm5pb24pLFxuICAgICAgICAgIHBvc2l0aW9uQ29tcG9uZW50cyA9IHBvc2l0aW9uLCAvLy9cbiAgICAgICAgICBmaXJzdFBvc2l0aW9uQ29tcG9uZW50ID0gZmlyc3QocG9zaXRpb25Db21wb25lbnRzKSxcbiAgICAgICAgICB2ZXJ0aWNhbExpbmUgPSBuZXcgVmVydGljYWxMaW5lKGZpcnN0UG9zaXRpb25Db21wb25lbnQsIGZvcndhcmRzUm90YXRpb25RdWF0ZXJuaW9uLCBiYWNrd2FyZHNSb3RhdGlvblF1YXRlcm5pb24pO1xuXG4gICAgcmV0dXJuIHZlcnRpY2FsTGluZTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIlZlcnRpY2FsTGluZSIsImZpcnN0UG9zaXRpb25Db21wb25lbnQiLCJmb3J3YXJkc1JvdGF0aW9uUXVhdGVybmlvbiIsImJhY2t3YXJkc1JvdGF0aW9uUXVhdGVybmlvbiIsImdldEZpcnN0UG9zaXRpb25Db21wb25lbnQiLCJnZXRGb3J3YXJkc1JvdGF0aW9uUXVhdGVybmlvbiIsImdldEJhY2t3YXJkc1JvdGF0aW9uUXVhdGVybmlvbiIsInNwbGl0RmFjZXQiLCJmYWNldCIsInNtYWxsZXJGYWNldHMiLCJtYXJnaW5PZkVycm9yIiwiZWRnZXMiLCJnZXRFZGdlcyIsImludGVyc2VjdGlvbnMiLCJtYXAiLCJlZGdlIiwiaW50ZXJzZWN0aW9uIiwiY2FsY3VsYXRlSW50ZXJzZWN0aW9uIiwic3BsaXRXaXRoSW50ZXJzZWN0aW9ucyIsInNwbGl0RmFjZXRzIiwiZmFjZXRzIiwiZm9yRWFjaCIsInJvdGF0ZSIsInNtYWxsZXJGYWNldCIsImZyb21NYXNraW5nRWRnZSIsIm1hc2tpbmdFZGdlIiwibWFza2luZ0VkZ2VQb3NpdGlvbiIsImdldFBvc2l0aW9uIiwicm90YXRpb25BYm91dFpBeGlzUXVhdGVybmlvbiIsImNhbGN1bGF0ZVJvdGF0aW9uQWJvdXRaQXhpc1F1YXRlcm5pb24iLCJyb3RhdGlvblF1YXRlcm5pb24iLCJjYWxjdWxhdGVGb3J3YXJkc1JvdGF0aW9uUXVhdGVybmlvbiIsImNhbGN1bGF0ZUJhY2t3YXJkc1JvdGF0aW9uUXVhdGVybmlvbiIsInBvc2l0aW9uIiwicm90YXRlUG9zaXRpb24iLCJwb3NpdGlvbkNvbXBvbmVudHMiLCJmaXJzdCIsInZlcnRpY2FsTGluZSJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7K0JBT0E7OztlQUFxQkE7Ozt1QkFMQzswQkFDUzs4QkFDTzs0QkFDMkY7QUFFbEgsTUFBTUE7SUFDbkIsWUFBWUMsc0JBQXNCLEVBQUVDLDBCQUEwQixFQUFFQywyQkFBMkIsQ0FBRTtRQUMzRixJQUFJLENBQUNGLHNCQUFzQixHQUFHQTtRQUM5QixJQUFJLENBQUNDLDBCQUEwQixHQUFHQTtRQUNsQyxJQUFJLENBQUNDLDJCQUEyQixHQUFHQTtJQUNyQztJQUVBQyw0QkFBNEI7UUFDMUIsT0FBTyxJQUFJLENBQUNILHNCQUFzQjtJQUNwQztJQUVBSSxnQ0FBZ0M7UUFDOUIsT0FBTyxJQUFJLENBQUNILDBCQUEwQjtJQUN4QztJQUVBSSxpQ0FBaUM7UUFDL0IsT0FBTyxJQUFJLENBQUNILDJCQUEyQjtJQUN6QztJQUVBSSxXQUFXQyxLQUFLLEVBQUVDLGFBQWEsRUFBRUMsYUFBYSxFQUFFO1FBQzlDLE1BQU1DLFFBQVFILE1BQU1JLFFBQVEsSUFDdEJDLGdCQUFnQkYsTUFBTUcsR0FBRyxDQUFDLENBQUNDO1lBQ3pCLE1BQU1DLGVBQWVDLElBQUFBLG1DQUFxQixFQUFDRixNQUFNLElBQUksQ0FBQ2Qsc0JBQXNCO1lBRTVFLE9BQU9lO1FBQ1Q7UUFFTlIsTUFBTVUsc0JBQXNCLENBQUNMLGVBQWVKLGVBQWVDO0lBQzdEO0lBRUFTLFlBQVlDLE1BQU0sRUFBRVYsYUFBYSxFQUFFO1FBQ2pDLE1BQU1ELGdCQUFnQixFQUFFO1FBRXhCVyxPQUFPQyxPQUFPLENBQUMsQ0FBQ2I7WUFDZEEsTUFBTWMsTUFBTSxDQUFDLElBQUksQ0FBQ3BCLDBCQUEwQjtZQUU1QyxJQUFJLENBQUNLLFVBQVUsQ0FBQ0MsT0FBT0MsZUFBZUM7UUFDeEM7UUFFQUQsY0FBY1ksT0FBTyxDQUFDLENBQUNFO1lBQ3JCQSxhQUFhRCxNQUFNLENBQUMsSUFBSSxDQUFDbkIsMkJBQTJCO1FBQ3REO1FBRUEsT0FBT007SUFDVDtJQUVBLE9BQU9lLGdCQUFnQkMsV0FBVyxFQUFFO1FBQ2xDLE1BQU1DLHNCQUFzQkQsWUFBWUUsV0FBVyxJQUM3Q0MsK0JBQStCQyxJQUFBQSxpREFBcUMsRUFBQ0osY0FDckVLLHFCQUFxQkYsOEJBQ3JCMUIsNkJBQTZCNkIsSUFBQUEsK0NBQW1DLEVBQUNELHFCQUNqRTNCLDhCQUE4QjZCLElBQUFBLGdEQUFvQyxFQUFDRixxQkFDbkVHLFdBQVdDLElBQUFBLHdCQUFjLEVBQUNSLHFCQUFxQkkscUJBQy9DSyxxQkFBcUJGLFVBQ3JCaEMseUJBQXlCbUMsSUFBQUEsWUFBSyxFQUFDRCxxQkFDL0JFLGVBQWUsSUFBSXJDLGFBQWFDLHdCQUF3QkMsNEJBQTRCQztRQUUxRixPQUFPa0M7SUFDVDtBQUNGIn0=