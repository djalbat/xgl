"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return TexturedFacet;
    }
});
const _edge = /*#__PURE__*/ _interop_require_default(require("../edge"));
const _facet = /*#__PURE__*/ _interop_require_default(require("../facet"));
const _normal = /*#__PURE__*/ _interop_require_default(require("../normal"));
const _vertex = /*#__PURE__*/ _interop_require_default(require("../vertex"));
const _array = require("../../utilities/array");
const _approximate = require("../../utilities/approximate");
const _vertices = require("../../utilities/vertices");
const _facet1 = require("../../utilities/facet");
const _texture = require("../../utilities/texture");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
class TexturedFacet extends _facet.default {
    constructor(vertices, normal, edges, imageName, textureCoordinateTuples){
        super(vertices, normal, edges);
        this.imageName = imageName;
        this.textureCoordinateTuples = textureCoordinateTuples;
    }
    getImageName() {
        return this.imageName;
    }
    getTextureCoordinateTuples() {
        return this.textureCoordinateTuples;
    }
    getMappedTextureCoordinateTuples(imageMapJSON) {
        const json = imageMapJSON[this.imageName], extent = json, mappedTextureCoordinateTuples = (0, _texture.calculateMappedTextureCoordinateTuples)(this.textureCoordinateTuples, extent);
        return mappedTextureCoordinateTuples;
    }
    permute(places) {
        super.permute(places);
        this.textureCoordinateTuples = (0, _array.permute)(this.textureCoordinateTuples, places);
    }
    fromVerticesAndMarginOfError(vertices, marginOfError) {
        let texturedFacet = null;
        const area = (0, _facet1.calculateArea)(vertices), areaApproximatelyEqualToZero = (0, _approximate.isApproximatelyEqualToZero)(area, marginOfError);
        if (!areaApproximatelyEqualToZero) {
            const normal = (0, _facet1.calculateNormal)(vertices, _normal.default), parentVertices = this.vertices, adjustedTextureCoordinateTuple = (0, _texture.calculateAdjustedTextureCoordinateTuples)(vertices, normal, parentVertices, this.textureCoordinateTuples), edges = (0, _facet1.calculateEdges)(vertices, _edge.default), imageName = this.imageName, textureCoordinateTuples = adjustedTextureCoordinateTuple; ///
            texturedFacet = new TexturedFacet(vertices, normal, edges, imageName, textureCoordinateTuples);
        }
        return texturedFacet;
    }
    clone() {
        let vertices = this.getVertices(), normal = this.getNormal(), edges = this.getEdges();
        vertices = (0, _facet1.cloneVertices)(vertices);
        normal = (0, _facet1.cloneNormal)(normal);
        edges = (0, _facet1.cloneEdges)(edges);
        const imageName = this.imageName, textureCoordinateTuples = (0, _texture.cloneTextureCoordinateTuples)(this.textureCoordinateTuples), texturedFacet = new TexturedFacet(vertices, normal, edges, imageName, textureCoordinateTuples);
        return texturedFacet;
    }
    static fromTextureCoordinateTuplesCoordinatesTuplesIndexTupleImageNameAndMarginOfError(textureCoordinateTuples, coordinateTuples, indexTuple, imageName, marginOfError) {
        let texturedFacet = null;
        const vertices = (0, _vertices.verticesFromCoordinateTuplesAndIndexTuple)(coordinateTuples, indexTuple, _vertex.default), area = (0, _facet1.calculateArea)(vertices), areaApproximatelyEqualToZero = (0, _approximate.isApproximatelyEqualToZero)(area, marginOfError);
        if (!areaApproximatelyEqualToZero) {
            const normal = (0, _facet1.calculateNormal)(vertices, _normal.default), edges = (0, _facet1.calculateEdges)(vertices, _edge.default);
            texturedFacet = new TexturedFacet(vertices, normal, edges, imageName, textureCoordinateTuples);
        }
        return texturedFacet;
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9wcmltaXRpdmUvZmFjZXQvdGV4dHVyZWQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCBFZGdlIGZyb20gXCIuLi9lZGdlXCI7XG5pbXBvcnQgRmFjZXQgZnJvbSBcIi4uL2ZhY2V0XCI7XG5pbXBvcnQgTm9ybWFsIGZyb20gXCIuLi9ub3JtYWxcIjtcbmltcG9ydCBWZXJ0ZXggZnJvbSBcIi4uL3ZlcnRleFwiO1xuXG5pbXBvcnQgeyBwZXJtdXRlIH0gZnJvbSBcIi4uLy4uL3V0aWxpdGllcy9hcnJheVwiO1xuaW1wb3J0IHsgaXNBcHByb3hpbWF0ZWx5RXF1YWxUb1plcm8gfSBmcm9tIFwiLi4vLi4vdXRpbGl0aWVzL2FwcHJveGltYXRlXCI7XG5pbXBvcnQgeyB2ZXJ0aWNlc0Zyb21Db29yZGluYXRlVHVwbGVzQW5kSW5kZXhUdXBsZSB9IGZyb20gXCIuLi8uLi91dGlsaXRpZXMvdmVydGljZXNcIjtcbmltcG9ydCB7IGNsb25lRWRnZXMsIGNsb25lTm9ybWFsLCBjbG9uZVZlcnRpY2VzLCBjYWxjdWxhdGVBcmVhLCBjYWxjdWxhdGVFZGdlcywgY2FsY3VsYXRlTm9ybWFsIH0gZnJvbSBcIi4uLy4uL3V0aWxpdGllcy9mYWNldFwiO1xuaW1wb3J0IHsgY2xvbmVUZXh0dXJlQ29vcmRpbmF0ZVR1cGxlcywgY2FsY3VsYXRlTWFwcGVkVGV4dHVyZUNvb3JkaW5hdGVUdXBsZXMsIGNhbGN1bGF0ZUFkanVzdGVkVGV4dHVyZUNvb3JkaW5hdGVUdXBsZXMgfSBmcm9tIFwiLi4vLi4vdXRpbGl0aWVzL3RleHR1cmVcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGV4dHVyZWRGYWNldCBleHRlbmRzIEZhY2V0IHtcbiAgY29uc3RydWN0b3IodmVydGljZXMsIG5vcm1hbCwgZWRnZXMsIGltYWdlTmFtZSwgdGV4dHVyZUNvb3JkaW5hdGVUdXBsZXMpIHtcbiAgICBzdXBlcih2ZXJ0aWNlcywgbm9ybWFsLCBlZGdlcyk7XG5cbiAgICB0aGlzLmltYWdlTmFtZSA9IGltYWdlTmFtZTtcblxuICAgIHRoaXMudGV4dHVyZUNvb3JkaW5hdGVUdXBsZXMgPSB0ZXh0dXJlQ29vcmRpbmF0ZVR1cGxlcztcbiAgfVxuXG4gIGdldEltYWdlTmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy5pbWFnZU5hbWU7XG4gIH1cblxuICBnZXRUZXh0dXJlQ29vcmRpbmF0ZVR1cGxlcygpIHtcbiAgICByZXR1cm4gdGhpcy50ZXh0dXJlQ29vcmRpbmF0ZVR1cGxlcztcbiAgfVxuXG4gIGdldE1hcHBlZFRleHR1cmVDb29yZGluYXRlVHVwbGVzKGltYWdlTWFwSlNPTikge1xuICAgIGNvbnN0IGpzb24gPSBpbWFnZU1hcEpTT05bdGhpcy5pbWFnZU5hbWVdLFxuICAgICAgICAgIGV4dGVudCA9IGpzb24sICAvLy9cbiAgICAgICAgICBtYXBwZWRUZXh0dXJlQ29vcmRpbmF0ZVR1cGxlcyA9IGNhbGN1bGF0ZU1hcHBlZFRleHR1cmVDb29yZGluYXRlVHVwbGVzKHRoaXMudGV4dHVyZUNvb3JkaW5hdGVUdXBsZXMsIGV4dGVudCk7XG5cbiAgICByZXR1cm4gbWFwcGVkVGV4dHVyZUNvb3JkaW5hdGVUdXBsZXM7XG4gIH1cblxuICBwZXJtdXRlKHBsYWNlcykge1xuICAgIHN1cGVyLnBlcm11dGUocGxhY2VzKTtcblxuICAgIHRoaXMudGV4dHVyZUNvb3JkaW5hdGVUdXBsZXMgPSBwZXJtdXRlKHRoaXMudGV4dHVyZUNvb3JkaW5hdGVUdXBsZXMsIHBsYWNlcyk7XG4gIH1cblxuICBmcm9tVmVydGljZXNBbmRNYXJnaW5PZkVycm9yKHZlcnRpY2VzLCBtYXJnaW5PZkVycm9yKSB7XG4gICAgbGV0IHRleHR1cmVkRmFjZXQgPSBudWxsO1xuXG4gICAgY29uc3QgYXJlYSA9IGNhbGN1bGF0ZUFyZWEodmVydGljZXMpLFxuICAgICAgICAgIGFyZWFBcHByb3hpbWF0ZWx5RXF1YWxUb1plcm8gPSBpc0FwcHJveGltYXRlbHlFcXVhbFRvWmVybyhhcmVhLCBtYXJnaW5PZkVycm9yKTtcblxuICAgIGlmICghYXJlYUFwcHJveGltYXRlbHlFcXVhbFRvWmVybykge1xuICAgICAgY29uc3Qgbm9ybWFsID0gY2FsY3VsYXRlTm9ybWFsKHZlcnRpY2VzLCBOb3JtYWwpLFxuICAgICAgICAgICAgcGFyZW50VmVydGljZXMgPSB0aGlzLnZlcnRpY2VzLCAvLy9cbiAgICAgICAgICAgIGFkanVzdGVkVGV4dHVyZUNvb3JkaW5hdGVUdXBsZSA9IGNhbGN1bGF0ZUFkanVzdGVkVGV4dHVyZUNvb3JkaW5hdGVUdXBsZXModmVydGljZXMsIG5vcm1hbCwgcGFyZW50VmVydGljZXMsIHRoaXMudGV4dHVyZUNvb3JkaW5hdGVUdXBsZXMpLFxuICAgICAgICAgICAgZWRnZXMgPSBjYWxjdWxhdGVFZGdlcyh2ZXJ0aWNlcywgRWRnZSksXG4gICAgICAgICAgICBpbWFnZU5hbWUgPSB0aGlzLmltYWdlTmFtZSxcbiAgICAgICAgICAgIHRleHR1cmVDb29yZGluYXRlVHVwbGVzID0gYWRqdXN0ZWRUZXh0dXJlQ29vcmRpbmF0ZVR1cGxlOyAgLy8vXG5cbiAgICAgIHRleHR1cmVkRmFjZXQgPSBuZXcgVGV4dHVyZWRGYWNldCh2ZXJ0aWNlcywgbm9ybWFsLCBlZGdlcywgaW1hZ2VOYW1lLCB0ZXh0dXJlQ29vcmRpbmF0ZVR1cGxlcyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRleHR1cmVkRmFjZXQ7XG4gIH1cblxuICBjbG9uZSgpIHtcbiAgICBsZXQgdmVydGljZXMgPSB0aGlzLmdldFZlcnRpY2VzKCksXG4gICAgICAgIG5vcm1hbCA9IHRoaXMuZ2V0Tm9ybWFsKCksXG4gICAgICAgIGVkZ2VzID0gdGhpcy5nZXRFZGdlcygpO1xuXG4gICAgdmVydGljZXMgPSBjbG9uZVZlcnRpY2VzKHZlcnRpY2VzKTtcbiAgICBub3JtYWwgPSBjbG9uZU5vcm1hbChub3JtYWwpO1xuICAgIGVkZ2VzID0gY2xvbmVFZGdlcyhlZGdlcyk7XG5cbiAgICBjb25zdCBpbWFnZU5hbWUgPSB0aGlzLmltYWdlTmFtZSwgLy8vXG4gICAgICAgICAgdGV4dHVyZUNvb3JkaW5hdGVUdXBsZXMgPSBjbG9uZVRleHR1cmVDb29yZGluYXRlVHVwbGVzKHRoaXMudGV4dHVyZUNvb3JkaW5hdGVUdXBsZXMpLFxuICAgICAgICAgIHRleHR1cmVkRmFjZXQgPSBuZXcgVGV4dHVyZWRGYWNldCh2ZXJ0aWNlcywgbm9ybWFsLCBlZGdlcywgaW1hZ2VOYW1lLCB0ZXh0dXJlQ29vcmRpbmF0ZVR1cGxlcyk7XG5cbiAgICByZXR1cm4gdGV4dHVyZWRGYWNldDtcbiAgfVxuXG4gIHN0YXRpYyBmcm9tVGV4dHVyZUNvb3JkaW5hdGVUdXBsZXNDb29yZGluYXRlc1R1cGxlc0luZGV4VHVwbGVJbWFnZU5hbWVBbmRNYXJnaW5PZkVycm9yKHRleHR1cmVDb29yZGluYXRlVHVwbGVzLCBjb29yZGluYXRlVHVwbGVzLCBpbmRleFR1cGxlLCBpbWFnZU5hbWUsIG1hcmdpbk9mRXJyb3IpIHtcbiAgICBsZXQgdGV4dHVyZWRGYWNldCA9IG51bGw7XG5cbiAgICBjb25zdCB2ZXJ0aWNlcyA9IHZlcnRpY2VzRnJvbUNvb3JkaW5hdGVUdXBsZXNBbmRJbmRleFR1cGxlKGNvb3JkaW5hdGVUdXBsZXMsIGluZGV4VHVwbGUsIFZlcnRleCksXG4gICAgICAgICAgYXJlYSA9IGNhbGN1bGF0ZUFyZWEodmVydGljZXMpLFxuICAgICAgICAgIGFyZWFBcHByb3hpbWF0ZWx5RXF1YWxUb1plcm8gPSBpc0FwcHJveGltYXRlbHlFcXVhbFRvWmVybyhhcmVhLCBtYXJnaW5PZkVycm9yKTtcblxuICAgIGlmICghYXJlYUFwcHJveGltYXRlbHlFcXVhbFRvWmVybykge1xuICAgICAgY29uc3Qgbm9ybWFsID0gY2FsY3VsYXRlTm9ybWFsKHZlcnRpY2VzLCBOb3JtYWwpLFxuICAgICAgICAgICAgZWRnZXMgPSBjYWxjdWxhdGVFZGdlcyh2ZXJ0aWNlcywgRWRnZSk7XG5cbiAgICAgIHRleHR1cmVkRmFjZXQgPSBuZXcgVGV4dHVyZWRGYWNldCh2ZXJ0aWNlcywgbm9ybWFsLCBlZGdlcywgaW1hZ2VOYW1lLCB0ZXh0dXJlQ29vcmRpbmF0ZVR1cGxlcyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRleHR1cmVkRmFjZXQ7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJUZXh0dXJlZEZhY2V0IiwiRmFjZXQiLCJ2ZXJ0aWNlcyIsIm5vcm1hbCIsImVkZ2VzIiwiaW1hZ2VOYW1lIiwidGV4dHVyZUNvb3JkaW5hdGVUdXBsZXMiLCJnZXRJbWFnZU5hbWUiLCJnZXRUZXh0dXJlQ29vcmRpbmF0ZVR1cGxlcyIsImdldE1hcHBlZFRleHR1cmVDb29yZGluYXRlVHVwbGVzIiwiaW1hZ2VNYXBKU09OIiwianNvbiIsImV4dGVudCIsIm1hcHBlZFRleHR1cmVDb29yZGluYXRlVHVwbGVzIiwiY2FsY3VsYXRlTWFwcGVkVGV4dHVyZUNvb3JkaW5hdGVUdXBsZXMiLCJwZXJtdXRlIiwicGxhY2VzIiwiZnJvbVZlcnRpY2VzQW5kTWFyZ2luT2ZFcnJvciIsIm1hcmdpbk9mRXJyb3IiLCJ0ZXh0dXJlZEZhY2V0IiwiYXJlYSIsImNhbGN1bGF0ZUFyZWEiLCJhcmVhQXBwcm94aW1hdGVseUVxdWFsVG9aZXJvIiwiaXNBcHByb3hpbWF0ZWx5RXF1YWxUb1plcm8iLCJjYWxjdWxhdGVOb3JtYWwiLCJOb3JtYWwiLCJwYXJlbnRWZXJ0aWNlcyIsImFkanVzdGVkVGV4dHVyZUNvb3JkaW5hdGVUdXBsZSIsImNhbGN1bGF0ZUFkanVzdGVkVGV4dHVyZUNvb3JkaW5hdGVUdXBsZXMiLCJjYWxjdWxhdGVFZGdlcyIsIkVkZ2UiLCJjbG9uZSIsImdldFZlcnRpY2VzIiwiZ2V0Tm9ybWFsIiwiZ2V0RWRnZXMiLCJjbG9uZVZlcnRpY2VzIiwiY2xvbmVOb3JtYWwiLCJjbG9uZUVkZ2VzIiwiY2xvbmVUZXh0dXJlQ29vcmRpbmF0ZVR1cGxlcyIsImZyb21UZXh0dXJlQ29vcmRpbmF0ZVR1cGxlc0Nvb3JkaW5hdGVzVHVwbGVzSW5kZXhUdXBsZUltYWdlTmFtZUFuZE1hcmdpbk9mRXJyb3IiLCJjb29yZGluYXRlVHVwbGVzIiwiaW5kZXhUdXBsZSIsInZlcnRpY2VzRnJvbUNvb3JkaW5hdGVUdXBsZXNBbmRJbmRleFR1cGxlIiwiVmVydGV4Il0sIm1hcHBpbmdzIjoiQUFBQTs7OzsrQkFhQTs7O2VBQXFCQTs7OzZEQVhKOzhEQUNDOytEQUNDOytEQUNBO3VCQUVLOzZCQUNtQjswQkFDZTt3QkFDNkM7eUJBQ3dCOzs7Ozs7QUFFaEgsTUFBTUEsc0JBQXNCQyxjQUFLO0lBQzlDLFlBQVlDLFFBQVEsRUFBRUMsTUFBTSxFQUFFQyxLQUFLLEVBQUVDLFNBQVMsRUFBRUMsdUJBQXVCLENBQUU7UUFDdkUsS0FBSyxDQUFDSixVQUFVQyxRQUFRQztRQUV4QixJQUFJLENBQUNDLFNBQVMsR0FBR0E7UUFFakIsSUFBSSxDQUFDQyx1QkFBdUIsR0FBR0E7SUFDakM7SUFFQUMsZUFBZTtRQUNiLE9BQU8sSUFBSSxDQUFDRixTQUFTO0lBQ3ZCO0lBRUFHLDZCQUE2QjtRQUMzQixPQUFPLElBQUksQ0FBQ0YsdUJBQXVCO0lBQ3JDO0lBRUFHLGlDQUFpQ0MsWUFBWSxFQUFFO1FBQzdDLE1BQU1DLE9BQU9ELFlBQVksQ0FBQyxJQUFJLENBQUNMLFNBQVMsQ0FBQyxFQUNuQ08sU0FBU0QsTUFDVEUsZ0NBQWdDQyxJQUFBQSwrQ0FBc0MsRUFBQyxJQUFJLENBQUNSLHVCQUF1QixFQUFFTTtRQUUzRyxPQUFPQztJQUNUO0lBRUFFLFFBQVFDLE1BQU0sRUFBRTtRQUNkLEtBQUssQ0FBQ0QsUUFBUUM7UUFFZCxJQUFJLENBQUNWLHVCQUF1QixHQUFHUyxJQUFBQSxjQUFPLEVBQUMsSUFBSSxDQUFDVCx1QkFBdUIsRUFBRVU7SUFDdkU7SUFFQUMsNkJBQTZCZixRQUFRLEVBQUVnQixhQUFhLEVBQUU7UUFDcEQsSUFBSUMsZ0JBQWdCO1FBRXBCLE1BQU1DLE9BQU9DLElBQUFBLHFCQUFhLEVBQUNuQixXQUNyQm9CLCtCQUErQkMsSUFBQUEsdUNBQTBCLEVBQUNILE1BQU1GO1FBRXRFLElBQUksQ0FBQ0ksOEJBQThCO1lBQ2pDLE1BQU1uQixTQUFTcUIsSUFBQUEsdUJBQWUsRUFBQ3RCLFVBQVV1QixlQUFNLEdBQ3pDQyxpQkFBaUIsSUFBSSxDQUFDeEIsUUFBUSxFQUM5QnlCLGlDQUFpQ0MsSUFBQUEsaURBQXdDLEVBQUMxQixVQUFVQyxRQUFRdUIsZ0JBQWdCLElBQUksQ0FBQ3BCLHVCQUF1QixHQUN4SUYsUUFBUXlCLElBQUFBLHNCQUFjLEVBQUMzQixVQUFVNEIsYUFBSSxHQUNyQ3pCLFlBQVksSUFBSSxDQUFDQSxTQUFTLEVBQzFCQywwQkFBMEJxQixnQ0FBaUMsR0FBRztZQUVwRVIsZ0JBQWdCLElBQUluQixjQUFjRSxVQUFVQyxRQUFRQyxPQUFPQyxXQUFXQztRQUN4RTtRQUVBLE9BQU9hO0lBQ1Q7SUFFQVksUUFBUTtRQUNOLElBQUk3QixXQUFXLElBQUksQ0FBQzhCLFdBQVcsSUFDM0I3QixTQUFTLElBQUksQ0FBQzhCLFNBQVMsSUFDdkI3QixRQUFRLElBQUksQ0FBQzhCLFFBQVE7UUFFekJoQyxXQUFXaUMsSUFBQUEscUJBQWEsRUFBQ2pDO1FBQ3pCQyxTQUFTaUMsSUFBQUEsbUJBQVcsRUFBQ2pDO1FBQ3JCQyxRQUFRaUMsSUFBQUEsa0JBQVUsRUFBQ2pDO1FBRW5CLE1BQU1DLFlBQVksSUFBSSxDQUFDQSxTQUFTLEVBQzFCQywwQkFBMEJnQyxJQUFBQSxxQ0FBNEIsRUFBQyxJQUFJLENBQUNoQyx1QkFBdUIsR0FDbkZhLGdCQUFnQixJQUFJbkIsY0FBY0UsVUFBVUMsUUFBUUMsT0FBT0MsV0FBV0M7UUFFNUUsT0FBT2E7SUFDVDtJQUVBLE9BQU9vQixnRkFBZ0ZqQyx1QkFBdUIsRUFBRWtDLGdCQUFnQixFQUFFQyxVQUFVLEVBQUVwQyxTQUFTLEVBQUVhLGFBQWEsRUFBRTtRQUN0SyxJQUFJQyxnQkFBZ0I7UUFFcEIsTUFBTWpCLFdBQVd3QyxJQUFBQSxtREFBeUMsRUFBQ0Ysa0JBQWtCQyxZQUFZRSxlQUFNLEdBQ3pGdkIsT0FBT0MsSUFBQUEscUJBQWEsRUFBQ25CLFdBQ3JCb0IsK0JBQStCQyxJQUFBQSx1Q0FBMEIsRUFBQ0gsTUFBTUY7UUFFdEUsSUFBSSxDQUFDSSw4QkFBOEI7WUFDakMsTUFBTW5CLFNBQVNxQixJQUFBQSx1QkFBZSxFQUFDdEIsVUFBVXVCLGVBQU0sR0FDekNyQixRQUFReUIsSUFBQUEsc0JBQWMsRUFBQzNCLFVBQVU0QixhQUFJO1lBRTNDWCxnQkFBZ0IsSUFBSW5CLGNBQWNFLFVBQVVDLFFBQVFDLE9BQU9DLFdBQVdDO1FBQ3hFO1FBRUEsT0FBT2E7SUFDVDtBQUNGIn0=